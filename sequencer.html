<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">
  <title>Animalv0.1</title>



  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;0,600;0,900;1,200;1,400;1,600;1,900&display=swap"
    rel="stylesheet">


  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">


  <link rel="stylesheet" href="GUI/style.css">
  <script src="/tone/Tone.js"></script>
  <script type="module">
    import * as Tone from "/tone/Tone.js";
  </script>
  <style>
    .ajeno {
      pointer-events: none;
    }
  </style>


</head>

<body>


  <!-- MODALS -->


  <!-- JAM Modal -->

  <div class="modal fade" id="jamModal" tabindex="-1" role="dialog" aria-labelledby="jamModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h5 class="modal-title" id="jamModalLabel">Jam</h5>
        </div>

        <!-- MODAL BODY -->

        <div class="modal-body">

          <div class="mb-1">
            Escoge tus instrumentos
          </div>
          <div id="sel-inst" class="row mb-1">

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="1"
                id="channelsInvite1">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch8" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon-s">
                      Cerdo
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Cerdo</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="2"
                id="channelsInvite2">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch7" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg" class="animal-icon-s">
                      Loro
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Loro</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="3"
                id="channelsInvite3">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch6" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg" class="animal-icon-s">
                      Sapo
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Sapo</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="4"
                id="channelsInvite4">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch5" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg" class="animal-icon-s">
                      Pato
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Pato</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="5"
                id="channelsInvite5">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch4" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg" class="animal-icon-s">
                      Mono
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Mono</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="6"
                id="channelsInvite6">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch3" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg" class="animal-icon-s">
                      Gato
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Gato</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="7"
                id="channelsInvite7">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch2" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg" class="animal-icon-s">
                      Oso
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Oso</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="8"
                id="channelsInvite8">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch1" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg" class="animal-icon-s">
                      Buho
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Buho</div>
              </div>
            </div>

          </div>
          <input type="button" value="ok" id="okCanales">


          <div class="mt-3">
            Invitá animales
          </div>

          <div id="enlace">
            <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="enlace sesión" id="linkText" aria-label="sesion"
                aria-describedby="basic-addon2">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button">Copiar</button>
              </div>
            </div>
          </div>

          <!-- modal body end -->

        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  <!-- jam modal end -->

  <!-- HELP Modal -->

  <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="helpModalLabel">Ayuda</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <!-- MODAL BODY -->

        <div class="modal-body">
          ...
        </div>

        <!-- modal body end -->

        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  <!-- help modal end -->

  <!-- SETTINGS Modal -->

  <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h5 class="modal-title" id="settingsModalLabel">Ajustes</h5>

        </div>

        <!-- MODAL BODY -->

        <div class="modal-body">
          <div class="row">
            <div class="col-12">Fondos</div>
            <div class="col-12 m-0 d-flex">
              <div class="color-chip-1 mr-3"></div>
              <div class="color-chip-2 mr-3"></div>
              <div class="color-chip-3 mr-3"></div>
              <div class="color-chip-4 mr-3"></div>
              <div class="color-chip-5 mr-3"></div>
            </div>
            <div class="col-12 mt-3">Sonidos</div>
            <div class="row m-0">
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">Rock and roll</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- modal body end -->

        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  <!-- setings modal end -->


  <div class="container">

    <!-- HEADER -->

    <div id="Header" class="row">
      <div class="col-md-12 d-flex flex-row justify-content-between">
        <div id="Animal_logo">Animal</div>
        <div id="MoM_logo">[MoM]</div>
      </div>
    </div>

    <!-- header end -->


    <!-- MAIN-UP -->


    <div id="Main-up" class="row animate-up-down-in-1">
      <!-- PATHS SVG (#svgContainer) -->

      <div id="svgContainer" style="margin: 50px 50px;">
        <svg id="svg1" width="0" height="0">
          <path id="path1" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path2" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
          <path id="path3" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path4" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
          <path id="path5" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path6" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
          <path id="path7" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path8" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
        </svg>
      </div>

      <!-- paths svg end -->

      <!-- INSTRUMENTOS -->

      <span class="d-none d-lg-block">
        <div id="instrumentos" class="row mx-5 mx-lg-0 px-5 px-lg-0 d-flex flex-row justify-content-around text-white">

          <div id="buhoInst" class="col-auto m-0 mr-5 mr-xl-0 mt-2 p-0 instrumento8">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg" class="animal-icon">
                    Buho
                  </object>
                </div>
                <div class="title mt-1">Buh</div>
                <div class="sub_title">Base drum</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins1" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="osoInst" class="col-auto m-0 ml-1 mt-2 p-0 instrumento7">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal chocolate-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg" class="animal-icon">
                    Oso
                  </object>
                </div>
                <div class="title mt-1">Os</div>
                <div class="sub_title">Snare</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins2" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="gatoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento6">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg" class="animal-icon">
                    Gato
                  </object>
                </div>
                <div class="title mt-1">Gat</div>
                <div class="sub_title">Hi hat</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins3" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="monoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento5">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal marron-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg" class="animal-icon">
                    Mono
                  </object>
                </div>
                <div class="title mt-1">Mon</div>
                <div class="sub_title">Bass</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins4" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="patoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento4">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal mostaza-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg" class="animal-icon">
                    Pato
                  </object>
                </div>
                <div class="title mt-1">Pat</div>
                <div class="sub_title">Clave</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins5" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="sapoInst" class="col-auto m-0 ml-5 ml-xl-1 mt-2 p-0 instrumento3">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg" class="animal-icon">
                    Sapo
                  </object>
                </div>
                <div class="title mt-1">Sap</div>
                <div class="sub_title">Ride</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins6" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="loroInst" class="col-auto m-0 ml-1 mt-2 p-0 instrumento2">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg" class="animal-icon">
                    Loro
                  </object>
                </div>
                <div class="title mt-1">Lor</div>
                <div class="sub_title">Sampler</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins7" class="mom_dial"></div>
              </div>
            </div>
          </div>

          <div id="cerdoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento1">
            <div id="" class="d-none position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal rosa-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon">
                    Cerdo
                  </object>
                </div>
                <div class="title mt-1">Cerd</div>
                <div class="sub_title">Scratch</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins8" class="mom_dial"></div>
              </div>
            </div>
          </div>

        </div>
      </span>

      <!-- instrumentos end -->

    </div>

    <!-- main-up end -->


    <!-- MAIN-DOWN -->

    <div id="Main-down" class="row mb-5">

      <!-- AUDIO CABLES (#cables) -->
      <div id="cables" class="col-10 offset-lg-2 pr-5 d-none d-lg-block">
        <div id="outer" class="w-100 d-flex flex-row justify-content-center">
          <div id="inlet1"></div>
          <div id="inlet2"></div>
          <div id="inlet3"></div>
          <div id="inlet4"></div>
          <div id="inlet5"></div>
          <div id="inlet6"></div>
          <div id="inlet7"></div>
          <div id="inlet8"></div>
        </div>
      </div>
      <!-- audio cables end -->
      <div id="izq" class="col-12 col-lg-2 d-flex flex-column flex-lg-row">
        <div class="row pr-lg-1">
          <!-- CHAT -->
          <div id="chat-animal" class="col-6 col-lg-12 p-0">
            <div class="h-100 corners1 figura-1-animal">




              <ul id="messages"></ul>
              <form action="">
                <input id="m" autocomplete="off" /><button>Send</button>
              </form>


            </div>

          </div>
          <!-- chat end -->
          <!-- CONTROLES -->
          <div class="col-6 col-lg-12 m-0 p-lg-0">
            <div id="controles" class="row mb-1 mt-lg-1 ml-0 mx-lg-0 p-2 corners1 fondo-1-animal">
              <div class="col-8 col-lg-12">
                <div class="row h-100 corners1 blanco-ui-animal">
                  <!-- BPM -->
                  <div id="bpm" class="col-12">
                    <div class="row d-flex h-100">
                      <div id="decrement-bpm-btn" class="col-3 d-flex my-auto text-center">
                        <strong>-</strong>
                      </div>
                      <div id="increment-bpm-btn" class="col-3 d-flex my-auto text-center">
                        <strong>+</strong>
                      </div>
                      <div class="col-4 numero-animal my-auto text-center">
                        <strong id="bpmNumber">90</strong>
                        <span class="texto-animal">bpm</span>
                      </div>
                    </div>
                  </div>
                  <!-- SWING -->
                  <div id="swing" class="col-12">
                    <div class="row d-flex h-100">
                      <div id="decrement-bpm-btn" class="col-3 d-flex my-auto text-center">
                        <strong>-</strong>
                      </div>
                      <div id="increment-bpm-btn" class="col-3 d-flex my-auto text-center">
                        <strong>+</strong>
                      </div>
                      <div class="col-4 numero-animal my-auto text-center">
                        <strong>96</strong>
                        <span class="texto-animal">Swing</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- REC + MUTE -->
              <div id="rec-mute" class="col-4 col-lg-12 mt-lg-1">
                <div class="row d-flex flex-column flex-lg-row pl-1">
                  <span id="rec-btn" class="col-lg-6 text-center">
                    <strong>Rec</strong>
                  </span>
                  <span id="mute-btn" class="col-lg-6 text-center">
                    <strong>Mute</strong>
                  </span>
                </div>
              </div>

            </div>

            <!-- INSTRUMENTO SELECCIONADO (#sel-inst) -->


            <div id="sel-inst" class="m-0 p-0 d-block d-lg-none d-flex align-items-end text-white overflow-hidden">

              <span id="buhoInst" class="d-none">
                <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg" class="animal-icon">
                        Buho
                      </object>
                    </div>
                    <div class="title mt-1">Buh</div>
                    <div class="sub_title">Base drum</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins1-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch1-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="osoInst" class="d-none">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal chocolate-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg" class="animal-icon">
                        Loro
                      </object>
                    </div>
                    <div class="title mt-1">Os</div>
                    <div class="sub_title">Snare</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins2-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch2-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="gatoInst" class="d-none">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg" class="animal-icon">
                        Gato
                      </object>
                    </div>
                    <div class="title mt-1">Gat</div>
                    <div class="sub_title">Hi hat</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins3-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch3-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="monoInst" class="d-none">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal marron-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg" class="animal-icon">
                        Mono
                      </object>
                    </div>
                    <div class="title mt-1">Mon</div>
                    <div class="sub_title">Bass</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins4-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch4-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="patoInst" class="d-none">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal mostaza-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg" class="animal-icon">
                        Pato
                      </object>
                    </div>
                    <div class="title mt-1">Pat</div>
                    <div class="sub_title">Clave</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins5-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch5-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="sapoInst" class="d-none">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg" class="animal-icon">
                        Sapo
                      </object>
                    </div>
                    <div class="title mt-1">Sap</div>
                    <div class="sub_title">Ride</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins6-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch6-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="loroInst" class="d-none">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg" class="animal-icon">
                        Loro
                      </object>
                    </div>
                    <div class="title mt-1">Lor</div>
                    <div class="sub_title">Sampler</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins7-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch7-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

              <span id="cerdoInst" class="d-block">
                <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal rosa-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon">
                        Cerdo
                      </object>
                    </div>
                    <div class="title mt-1">Cerd</div>
                    <div class="sub_title">Scratch</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ins8-sel" class="mom_dial"></div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="dial-ch8-sel" class="mom_dial"></div>
                  </div>
                </div>
              </span>

            </div>

          </div>

          <!-- controles end -->

        </div>

      </div>
      <div id="der" class="col-12 col-lg-10 animate-up-down-in-3">

        <div class="row">

          <!-- CHANNEL CONTROL (#ch_control) -->

          <div id="ch_control" class="col-2 my-1 my-lg-0 p-4 corners-l fondo-1-animal">
            <div class="row ">

              <!-- ÍCONOS y DIALES -->

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup1">
                <div class="animal-icon ">
                  <object id="icono-ch8" type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon ">
                    Cerdo
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch8" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup2">
                <div class="animal-icon">
                  <object id="icono-ch7" type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg"
                    class="animal-icon chIcons">
                    Loro
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch7" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup3">
                <div class="animal-icon">
                  <object id="icono-ch6" type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg"
                    class="animal-icon chIcons">
                    Sapo
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch6" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup4">
                <div class="animal-icon">
                  <object id="icono-ch5" type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg"
                    class="animal-icon chIcons">
                    Pato
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch5" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup5">
                <div class="animal-icon">
                  <object id="icono-ch4" type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg"
                    class="animal-icon chIcons">
                    Mono
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch4" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup6">
                <div class="animal-icon">
                  <object id="icono-ch3" type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg"
                    class="animal-icon chIcons">
                    Gato
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch3" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup7">
                <div class="animal-icon">
                  <object id="icono-ch2" type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg"
                    class="animal-icon chIcons">
                    Oso
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch2" class="mom_dial"></div>
                </div>
              </div>

              <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup8">
                <div class="animal-icon" id="animalChannel1">
                  <object id="icono-ch1" type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg"
                    class="animal-icon chIcons">
                    Buho
                  </object>
                </div>
                <div class="dial_container d-none d-lg-block">
                  <div id="dial-ch1" class="mom_dial"></div>
                </div>
              </div>

              <!-- íconos y diales end -->

            </div>
          </div>

          <!-- channel control end -->

          <!-- SECUENCIADOR (#secuenciador) -->

          <div id="secuenciador" class="col-10 col-lg-9 mx-0 my-1 my-lg-0 p-0 pr-lg-1">
            <div class="pl-0 py-4 pr-4 corners-r overflow-hidden fondo-1-animal">
              <div id="seq-animal" class="grid-size"></div>
            </div>
          </div>

          <!-- secuenciador end -->

          <!-- REGISTRO COMPARTIR (#jam-ajustes) -->

          <div id="jam-ajustes"
            class="col-lg-1 py-4 px-3 d-flex flex-lg-column justify-content-between fondo-1-animal corners1">
            <div id="jam-sesion" class="mx-auto d-flex flex-lg-column">
              <a href="#" id="boton" data-toggle="modal" data-target="#jamModal" role="button">
                <img src="GUI/svg/botones/boton_rec.svg" class="animal-icon">
              </a>
              <div class="m-auto text-center">
                <span class="align-middle">Jam</span>
              </div>
            </div>
            <div id="combo-botones" class="mx-auto d-flex flex-row flex-lg-column">
              <div id="help" class="mx-auto align-self-baseline">
                <a href="#" id="boton" data-toggle="modal" data-target="#helpModal" role="button">
                  <img src="GUI/svg/botones/boton_ayuda.svg" class="animal-icon">
                </a>
              </div>

              <div id="settings" class="mx-auto align-self-baseline">
                <a href="#" id="boton" data-toggle="modal" data-target="#settingsModal" role="button">
                  <img src="GUI/svg/botones/boton_ajustes_w.svg" class="btn-icon">
                </a>
              </div>

            </div>

          </div>

          <!-- registro compartir end -->

        </div>
      </div>
    </div>

    <!-- main-down end -->


  </div>





  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  <script src='https://cdn.jsdelivr.net/npm/nexusui@2.0.13/dist/NexusUI.js'></script>

  <script src="GUI/scriptGUI.js"></script>
  <script src="GUI/svgDraw.js"></script>


  <script src="/socket.io/socket.io.js"></script>

  <script> //NET
    $(function () {
      var myChannel = [];//todos
      var socket = io(window.location.href);
      var newUrl;
      var roomID;
      var selectedChannels = [];
      var soloOn;
      var bpm = 90;
    //NEXUs
    var sequencer = new Nexus.Sequencer('#seq-animal', {
        'size': [580, 380],
        'mode': 'toggle',
        'rows': 8,
        'columns': 16
      });

        // TONEJS
        var sonidos = new Tone.Players({
        "Buho": "/audios/SA-001.mp3",
        "Oso": "/audios/SA-002.mp3",
        "Gato": "/audios/SA-003.mp3",
        "Sapo": "/audios/SA-004.mp3",
        "Pato": "/audios/SA-005.mp3",
        "Mono": "/audios/SA-006.mp3",
        "Cerdo": "/audios/SA-007.mp3",
        "Loro": "/audios/SA-008.mp3",
      }, {
        "volume": -1,
        "fadeOut": "16n",
      }).toMaster();

      //the notes
      var scaleNotes = ["Buho", "Oso", "Gato", "Sapo", "Pato", "Mono", "Cerdo", "Loro"];
      var stepNumber = 0;
      var loop = 0;
      Tone.Transport.bpm.value = bpm;
      var matrix = sequencer.matrix.pattern;
      //  io.connect);
      //esconde enlace
      $("#enlace").addClass("opacity-3");
      $("#enlace").css("pointer-events", "none");
      $("#okCanales").attr("disabled", true);

      socket.on('host', function (newroomID) {

        var currentUrl = window.location.href;
        var url = new URL(currentUrl);
        roomID = newroomID;
        url.searchParams.set("roomID", newroomID); // setting your param
        newUrl = url.href;
        let stateObj = { id: "100" };
        window.history.replaceState(stateObj, "roomID", newUrl);

        socket.emit('sequencer', sequencer.matrix.pattern);
        $(".disabled-overlay").addClass("d-none");
        myChannel = [1, 2, 3, 4, 5, 6, 7, 8];

      });


      socket.on('guest', function (pattern, michannel, unbpm) {
        $("#jam-sesion").addClass("opacity-3");
        $("#jam-sesion").addClass("ajeno");
        sequencer.matrix.set.all(pattern);
        myChannel = michannel;
        setMyChannel();
        bpm = unbpm;
      });

      socket.on('chat message', function (msg) {
        $('#messages').append($('<li>').text(msg));
      });


      $('form').submit(function (e) {
        e.preventDefault(); // prevents page reloading
        socket.emit('chat message', $('#m').val());
        $('#messages').append($('<li>').text($('#m').val()));
        $('#m').val('');
        return false;
      });

      $(".channelsInvite").click(function () {
        var selectedCH = $(this)[0];
        if ($(selectedCH).attr("sel") == "false") {
          $(selectedCH).css("border-style", "solid");
          selectedChannels.push($(selectedCH).attr("channelNumber"));
          $(selectedCH).attr("sel", "true");
        } else {
          $(selectedCH).attr("sel", "false");
          var index = selectedChannels.indexOf($(selectedCH).attr("channelNumber"));
          if (index > -1) {
            selectedChannels.splice(index, 1);
          }

          $(selectedCH).css("border-style", "none");
        }
        if (selectedChannels.length > 0) {
          $("#okCanales").attr("disabled", false);
        } else {
          $("#okCanales").attr("disabled", true);
        }
      });

      $("#okCanales").click(function () {
        if (selectedChannels.length > 0) {
          myChannel = selectedChannels;
          setMyChannel();
          $("#sel-inst").addClass("opacity-3");
          $("#sel-inst").css("pointer-events", "none");
          $("#enlace").removeClass("opacity-3");
          $("#enlace").css("pointer-events", "");
          $("#linkText").val(window.location.origin + "?roomID=" + roomID);


          socket.emit('roomOpened', myChannel);
        }
      });

      function setMyChannel() {
        $(".channelGroup").addClass("opacity-3");
        $(".channelGroup").addClass("ajeno");
        $(".disabled-overlay").addClass("d-block");

        if (myChannel.length > 0) {
          myChannel.forEach(channel => {
            $("#channelGroup" + channel).removeClass("opacity-2");
            $("#channelGroup" + channel).removeClass("ajeno");
            var myInst = $(".instrumento" + channel)[0];

            $(myInst).find(".disabled-overlay").removeClass("d-block");
            $(myInst).find(".disabled-overlay").addClass("d-none");
          });

          var cuadrados = $("rect");     //((v.row * 16)) + (v.column)];

          for (i = 0; i < cuadrados.length; i++) {
            var mio = false;
            myChannel.forEach(function (channel) {
              if (Math.floor(i / 16) == channel - 1) {
                mio = true;
              }
            });
            if (!mio) {
              var miRect = $("rect")[i];
              $(miRect).css("pointer-events", "none");
            }
          }
          /*
          sequencer.matrix.ui.cells.forEach(function (cell) {
            $(cell).css("pointer-events", "none");
          });*/

        }


        $(".ajeno").click(function (e) {
          e.preventDefault();
          console.log("entró a prevent");
        });


      }

      sequencer.on('change', function (v) {
        var itsMyChannel = false;
        myChannel.forEach(channel => {
          if (v.row == channel) {
            itsMyChannel = true;
            ///TENGO QUE PONERLRE     pointer-events: none; a todas las otras rows            

          }
        });


        /* console.log("es un cambio");
         console.log(v);
         socket.emit('toggleStep', v);*/
        var myCell = sequencer.cells[v.row * v.column];
        var miRect = $("rect")[((v.row * 16)) + (v.column)];

        if (v.state == true) {

          if (v.row == 0) {
            //     $(miRect).css("fill", "red");
          }

        }
      });

      socket.on('toggleStep', function (miStep) {
        console.log("llego " + miStep);
        sequencer.matrix.set.cell(miStep.column, miStep.row, miStep.state);
        // sequencer.colorize("accent","#ff0000");

      });

      socket.on("bpm", function (unbpm) {
        bpm = unbpm;
        Transport.time.bpm.rampTo(bpm, 4);
      });

      function emitBpm(bpm) {
        Tone.Transport.bpm.value = bpm;
        socket.emit('bpm', bpm);
      }

      $("#decrement-bpm-btn").click(function () {
        bpm--;
        $("#bpmNumber").html(bpm);
        emitBpm(bpm);
      });

      $("#increment-bpm-btn").click(function () {
        bpm++;
        $("#bpmNumber").html(bpm);
        emitBpm(bpm);
      });


      //chicons
      var myChannelAnimalIcon = $("#animalChannel1")[0];
      $(myChannelAnimalIcon).on('click', function (event) {
        document.write('Event type: ' + event.type);
        document.write('<br>CSS-Class: ');
        document.write($(this).attr('class'));
        console.log("algo");
      });

      //copy link
      $(".input-group-append").click(function () {
        /* Get the text field */
        var copyText = document.getElementById("linkText");

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");

      });

  
      sequencer.on('change', function (v) {
        // console.log(v);
      });

      sequencer.on('step', function (v) {
        //console.log(v);
      });
      // sequencer.init();
      ////////

      ////GRABAR
      var isRecording;
      const actx = Tone.context;
      const dest = actx.createMediaStreamDestination();
      const recorder = new MediaRecorder(dest.stream);
      sonidos.connect(dest);
      var chunks = [];

      $("#rec-btn").click(function () {

        if (isRecording) {
          recorder.stop();
          return;
        } else {
          isRecording = true;
          chunks = [];

          recorder.start();

          // dest = actx.createMediaStreamDestination();


          recorder.ondataavailable = evt => chunks.push(evt.data);

          recorder.onstop = evt => {
            let blob = new Blob(chunks, { type: 'audio/ogg; codecs=opus' });


            var url = URL.createObjectURL(blob);

            var a = document.createElement('a');
            a.href = url;
            a.download = 'ANIMAL Recording.ogg';
            a.target = "_blank"
            a.click();

          };
        }

      });
      ///GUARDA GRABACION

      $("#Animal_logo").click(function () { //inicia el sequencer

        // Tone.Transport.bpm.value = 90; //SACAR DE ACA
        if (loop === 0) {
          var matrix = sequencer.matrix.pattern;
          loop = new Tone.Sequence(function (time) {

            for (var i = 0; i < 8; i++) {

              if (matrix[i][stepNumber]) {
                sonidos.get(scaleNotes[i]).start(time, 0, "16n", 0, 1);

              }
            }
            stepNumber++;
            stepNumber = stepNumber % 16;
          }, scaleNotes, "16n");
          loop.start();

          loop.loop = true;
        }
        if (Tone.Transport.state == "started") {
          Tone.Transport.stop();
          sequencer.stop();
        } else {

          sequencer.start()
          sequencer.interval.ms(166);
          Tone.Transport.start();
        }
      });

    });




  </script>

  <script>
    $(document).ready(function () {
      // reset svg each time
      $("#svg1").attr("height", "0");
      $("#svg1").attr("width", "0");
      connectAll();
    });

    $(window).resize(function () {
      // reset svg each time
      $("#svg1").attr("height", "0");
      $("#svg1").attr("width", "0");
      connectAll();
    });
  </script>

  <script type="text/javascript">
    /*
    $(document).ready(function () {
      $('#jamModal').modal('show');
    });
    */
  </script>


</body>

</html>