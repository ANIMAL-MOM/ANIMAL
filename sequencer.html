<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no">
  <title>Animalv0.1</title>



  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,200;0,400;0,600;0,900;1,200;1,400;1,600;1,900&display=swap"
    rel="stylesheet">


  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">


  <link rel="stylesheet" href="GUI/style.css">
  <!--<script src="/tone/Tone.js"></script>-->
  <script type="module">
    import * as Tone from "/tone/Tone.js";
  </script>
  <style>
    .ajeno {
      pointer-events: none;
    }
  </style>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-167506651-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-167506651-1');
  </script>


</head>

<body>
  <div id="alerta" class="fondo-aqua-animal" style="display:none">
    <div class="container">
      <div class="col-12 text-center">
        <h1 class="mt-5">¡Opa!</h1>
        <h3 class="mt-1">Animal funciona en modo horizontal.<br />
          ¡Porfavor rota tu dispositivo!</h3>
        <div class="w-25 mx-auto mt-3">
          <img src="/GUI/img/rotate-devise.png" class="img-fluid">
        </div>
      </div>
    </div>
  </div>


  <!-- MODALS -->
  <!-- PLAY Modal -->
  <div class="modal fade" id="playModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header fondo-aqua-animal">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <!-- MODAL BODY -->
        <div class="modal-body fondo-aqua-animal">
          <div class="row mb-5">
            <div class="col-12 text-center">
              <div id="Animal_logo" class="mx-auto">
                <img src="GUI/img/Animal_logo_v0.png" width="300px">
              </div>
              <h1 class="my-5">¡Bienvenido!</h1>
              <div class="row">
                <div class="col-6">
                  <h3 class="mt-1">
                    Presiona el botón de PLAY para comenzar.
                  </h3>
                  <div class="w-50 mx-auto mt-3">
                    <img src="/GUI/img/landing/push-play.png" class="img-fluid">
                  </div>
                </div>
                <div class="col-6">
                  <h3 class="mt-1">
                    Activa la <em>Jam session</em> para invitar más animales.
                  </h3>
                  <div class="w-50 mx-auto mt-3">
                    <img src="/GUI/img/landing/push-jam.png" class="img-fluid">
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
        <!-- modal body end -->
      </div>
    </div>
  </div>
  <!-- setings modal end -->

  <!-- JAM Modal -->

  <div class="modal fade" id="jamModal" tabindex="-1" role="dialog" aria-labelledby="jamModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h5 class="modal-title" id="jamModalLabel">Jam</h5>
        </div>

        <!-- MODAL BODY -->

        <div class="modal-body">

          <div class="mb-1">
            Escoge tus instrumentos
          </div>
          <div id="sel-inst" class="row mb-1">

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="1"
                id="channelsInvite1">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch8" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon-s">
                      Cerdo
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Cerdo</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="2"
                id="channelsInvite2">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch7" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg" class="animal-icon-s">
                      Loro
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Loro</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="3"
                id="channelsInvite3">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch6" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg" class="animal-icon-s">
                      Sapo
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Sapo</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="4"
                id="channelsInvite4">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch5" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg" class="animal-icon-s">
                      Pato
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Pato</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="5"
                id="channelsInvite5">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch4" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg" class="animal-icon-s">
                      Mono
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Mono</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="6"
                id="channelsInvite6">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch3" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg" class="animal-icon-s">
                      Gato
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Gato</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="7"
                id="channelsInvite7">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch2" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg" class="animal-icon-s">
                      Oso
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Oso</div>
              </div>
            </div>

            <div class="col-3 my-1">
              <div class="corners-2 fondo-1-animal p-2 channelsInvite" sel="false" channelNumber="8"
                id="channelsInvite8">
                <div class="d-flex justify-content-around">

                  <div class="audio-preview-s">
                    <object id="audio-preview" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview-s">
                      Audio preview
                    </object>
                  </div>

                  <div id="sel-ch1" class="icon-container-s ml-1">
                    <object type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg" class="animal-icon-s">
                      Buho
                    </object>
                  </div>

                </div>
                <div class="titulo text-center pt-1">Buho</div>
              </div>
            </div>

          </div>
          <!-- <input type="button" value="ok" id="okCanales"> -->
          <div class="mb-1">
            <button type="button" value="ok" id="okCanales" class="btn btn-secondary px-4">
              Ok
            </button>
          </div>

          <div class="mt-3">
            Invitá animales
          </div>

          <div id="enlace">
            <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="enlace sesión" id="linkText" aria-label="sesion"
                aria-describedby="basic-addon2">
              <div class="input-group-append">
                <button class="btn btn-outline-secondary" type="button">Copiar</button>
              </div>
            </div>
          </div>

          <!-- modal body end -->

        </div>
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  <!-- jam modal end -->

  <!-- HELP Modal -->

  <div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="helpModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="helpModalLabel">Ayuda</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <!-- MODAL BODY -->

        <div class="modal-body">
          ...
        </div>

        <!-- modal body end -->

        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  <!-- help modal end -->
  <!-- LORO REC Modal -->
  <div class="modal fade" id="lororecModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-sm" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h5 class="modal-title" id="settingsModalLabel">Rec sample</h5>
        </div>
        <!-- MODAL BODY -->
        <div class="modal-body">

          <div class="row">
            <div id="rec-play" class="col">
              <div class="mb-1">
                Puedes grabar un sonido de hasta 3 segundos.
              </div>
              <div class="btn-group my-2" role="group" aria-label="Basic example">
                <div id="loro-rec-preview" class="audio-preview corners-l">
                  <img src="GUI/img/audio-trans.png" class="animal-pointer corners-l h-100 w-auto" data-toggle="tooltip"
                    data-placement="top" title="Escuchar">
                </div>
                <div class="d-flex align-items-center loro-rec corners-r">
                  <a href="#" class="d-flex m-auto texto-chico rec-icon-s">Rec</a>
                </div>
              </div>
              <div class="mb-1">
                Haz click en el parlante para escuchar, click en OK para usar el sonido.
              </div>
              <div class="mb-1">
                <button type="button" class="btn btn-secondary px-4">
                  Ok
                </button>
              </div>
            </div>
          </div>

        </div>
        <!-- modal body end -->
        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>
  <!-- loro rec end -->
  <!-- SETTINGS Modal -->

  <!-- SETTINGS Modal -->

  <div class="modal fade" id="settingsModal" tabindex="-1" role="dialog" aria-labelledby="settingsModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h5 class="modal-title" id="settingsModalLabel">Ajustes</h5>

        </div>

        <!-- MODAL BODY -->

        <div class="modal-body">
          <div class="row">
            <div class="col-12">Fondos</div>
            <div class="col-12 m-0 d-flex">
              <div class="color-chip-1 mr-3"></div>
              <div class="color-chip-2 mr-3"></div>
              <div class="color-chip-3 mr-3"></div>
              <div class="color-chip-4 mr-3"></div>
              <div class="color-chip-5 mr-3"></div>
            </div>
            <div class="col-12 mt-3">Sonidos</div>
            <div class="row m-0">
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">Rock and roll</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
              <div id="sonidos-kit-1" class="col-6">
                <div class="btn-group my-2" role="group" aria-label="Basic example">
                  <div class="audio-preview corners-l">
                    <object id="audiopre-kit1" type="image/svg+xml" data="GUI/svg/botones/boton_audio_w.svg"
                      class="audio-preview corners-l">
                      Audio preview
                    </object>
                  </div>
                  <button type="button" class="btn btn-secondary">rock</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- modal body end -->

        <div class="modal-footer">
        </div>
      </div>
    </div>
  </div>

  <!-- setings modal end -->


  <div class="container">

    <!-- HEADER -->

    <div id="Header" class="row">
      <div class="col-md-12 d-flex p-3 flex-row justify-content-between">
        <div id="Animal_logo" class="d-flex flex-column justify-content-arround">
          <img src="GUI/img/Animal_logo_v0.png" height="40px">
        </div>
        <div id="MoM_logo" class="d-flex mr-2 my-auto">[MoM]</div>
      </div>
    </div>
    <!-- header end -->

    <!-- MAIN-UP -->


    <div id="Main-up" class="row ">
      <!-- PATHS SVG (#svgContainer) -->

      <div id="svgContainer" style="margin: 50px 50px;">
        <svg id="svg1" width="0" height="0">
          <path id="path1" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path2" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
          <path id="path3" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path4" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
          <path id="path5" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path6" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
          <path id="path7" d="M0 0" stroke="#6D777E" fill="none" stroke-width="8px" ; />
          <path id="path8" d="M0 0" stroke="#B8C5D0" fill="none" stroke-width="8px" ; />
        </svg>
      </div>

      <!-- paths svg end -->

      <!-- INSTRUMENTOS -->

      <span class="d-none d-lg-block">
        <div id="instrumentos" class="row mx-5 mx-lg-0 px-5 px-lg-0 d-flex flex-row justify-content-around text-white">

          <div id="buhoInst" class="col-auto m-0 mr-5 mr-xl-0 mt-2 p-0 instrumento8">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg" class="animal-icon">
                    Buho
                  </object>
                </div>
                <div class="title mt-1">Buh</div>
                <div class="sub_title">Base drum</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins1" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>


          <div id="osoInst" class="col-auto m-0 ml-1 mt-2 p-0 instrumento7">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal chocolate-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg" class="animal-icon">
                    Oso
                  </object>
                </div>
                <div class="title mt-1">Os</div>
                <div class="sub_title">Snare</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins2" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>


          <div id="gatoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento6">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg" class="animal-icon">
                    Gato
                  </object>
                </div>
                <div class="title mt-1">Gat</div>
                <div class="sub_title">Hi hat</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins3" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>

          <div id="monoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento5">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal marron-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg" class="animal-icon">
                    Mono
                  </object>
                </div>
                <div class="title mt-1">Mon</div>
                <div class="sub_title">Bass</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins4" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>


          <div id="patoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento4">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal mostaza-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg" class="animal-icon">
                    Pato
                  </object>
                </div>
                <div class="title mt-1">Pat</div>
                <div class="sub_title">Clave</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins5" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>

          <div id="sapoInst" class="col-auto m-0 ml-5 ml-xl-1 mt-2 p-0 instrumento3">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg" class="animal-icon">
                    Sapo
                  </object>
                </div>
                <div class="title mt-1">Sap</div>
                <div class="sub_title">Ride</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins6" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>

          <div id="loroInst" class="col-auto m-0 ml-1 mt-2 p-0 instrumento2">
            <div id="" class="position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg" class="animal-icon">
                    Loro
                  </object>
                </div>
                <div class="title mt-1">Lor</div>
                <div class="sub_title">Sampler</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins7" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>

          <div id="cerdoInst" class="col-auto m-0 ml-1 mr-5 mr-xl-0 mt-2 p-0 instrumento1">
            <div id="" class="d-none position-absolute opacity-4 corners1 destaque-animal w-100 h-100 disabled-overlay">
            </div>
            <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal rosa-animal">
              <div class="d-flex flex-column">
                <div class="animal-icon">
                  <object type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon">
                    Cerdo
                  </object>
                </div>
                <div class="title mt-1">Cerd</div>
                <div class="sub_title">Scratch</div>
              </div>
              <div class="dial_container mb-1 ml-1">
                <div id="dial-ins8" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch"></div>
              </div>
            </div>
          </div>

        </div>
      </span>

      <!-- instrumentos end -->

    </div>

    <!-- main-up end -->


    <!-- MAIN-DOWN -->

    <div id="Main-down" class="row mb-5">

      <!-- AUDIO CABLES (#cables) -->
      <div id="cables" class="col-10 offset-lg-2 pr-5 d-none d-lg-block">
        <div id="outer" class="w-100 d-flex flex-row justify-content-center">
          <div id="inlet1"></div>
          <div id="inlet2"></div>
          <div id="inlet3"></div>
          <div id="inlet4"></div>
          <div id="inlet5"></div>
          <div id="inlet6"></div>
          <div id="inlet7"></div>
          <div id="inlet8"></div>
        </div>
      </div>
      <!-- audio cables end -->
      <div id="izq" class="col-12 col-lg-3 col-xl-2 d-flex flex-column flex-lg-row">
        <div class="row pr-lg-1 d-flex h-100">
          <!-- CHAT -->
          <div id="chat-animal" class="col-5 col-lg-12 p-0 d-flex">
            <div class="pt-4 pb-2 px-2 corners1 figura-1-animal">
              <ul id="messages" class="d-flex h-75 flex-column-reverse m-0 p-0 texto-chico"></ul>

              <form action="" class="pt-2 d-flex h-25">
                <input id="m" autocomplete="off" class="w-75 border-0 corners1" />
                <button class="ml-1 p-1 animal-icon-s"><img src="GUI/img/ok-btn.png" class="img-fluid"></button>
              </form>


            </div>

          </div>
          <!-- chat end -->
          <!-- CONTROLES -->
          <div id="controles" class="col-6 col-lg-12 p-0 pt-lg-1 d-flex flex-column flex-lg-row">
            <div class="row m-0 p-2 d-flex custom-height corners1 fondo-1-animal">
              <div class="col-8 col-lg-12">
                <div class="row h-100">
                  <!-- BPM -->
                  <div id="bpm" class="col-12">
                    <div class="row d-flex h-100">
                      <div id="decrement-bpm-btn" class="col-3 d-flex my-0 blanco-ui-animal animal-pointer">
                        <strong class="m-auto text-center">-</strong>
                      </div>
                      <div id="increment-bpm-btn" class="col-3 d-flex my-0 blanco-ui-animal animal-pointer">
                        <strong class="m-auto text-center">+</strong>
                      </div>
                      <div id="bpm-display" class="col-6 numero-animal d-flex my-0 blanco-ui-animal">
                        <strong id="bpmNumber" class="m-auto text-center">90</strong>
                        <span class="m-auto pl-1 texto-chico text-center">bpm</span>
                      </div>
                    </div>
                  </div>
                  <!-- SWING -->
                  <div id="swing" class="col-12">
                    <div class="row d-flex h-100">
                      <div id="decrement-swing-btn" class="col-3 d-flex my-0 blanco-ui-animal animal-pointer">
                        <strong class="m-auto text-center">-</strong>
                      </div>
                      <div id="increment-swing-btn" class="col-3 d-flex my-0 blanco-ui-animal animal-pointer">
                        <strong class="m-auto text-center">+</strong>
                      </div>
                      <div id="swing-display" class="col-6 numero-animal d-flex my-0 blanco-ui-animal">
                        <strong id="swingNumber" class="m-auto text-center">0</strong>
                        <span class="m-auto pl-1 texto-chico text-center">swing</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- REC + MUTE -->
              <div id="rec-mute" class="col-4 col-lg-12 mt-lg-1 ">
                <div class="row h-100 my-0 pl-1 pl-lg-0 d-flex flex-column flex-lg-row ">
                  <div id="rec-btn" class="col-lg-6 d-flex my-0 blanco-ui-animal animal-pointer">
                    <span class="m-auto text-center">Rec</span>
                  </div>
                  <div id="mute-btn" class="col-lg-6 d-flex my-0 figura-1-animal mute-btn animal-pointer">
                    <span class="m-auto text-center"></span>
                  </div>
                </div>
              </div>
            </div>



            <!-- INSTRUMENTO SELECCIONADO (#sel-inst) -->

            <div id="sel-inst" class="m-0 p-0 pt-1 d-block d-lg-none d-flex align-items-end text-white overflow-hidden">

              <span id="buhoInst" class="d-none instMobile">
                <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/buho-w.svg" class="animal-icon">
                        Buho
                      </object>
                    </div>
                    <div class="title mt-1">Buh</div>
                    <div class="sub_title">Base drum</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ins1" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                    </div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ch1" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                    </div>
                  </div>
                </div>
              </span>

              <span id="osoInst" class="d-none instMobile">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal chocolate-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/oso-w.svg" class="animal-icon">
                        Oso
                      </object>
                    </div>
                    <div class="title mt-1">Os</div>
                    <div class="sub_title">Snare</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ins2" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                    </div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ch2" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                    </div>
                  </div>
                </div>
              </span>

              <span id="gatoInst" class="d-none instMobile">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal gris-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/gato-w.svg" class="animal-icon">
                        Gato
                      </object>
                    </div>
                    <div class="title mt-1">Gat</div>
                    <div class="sub_title">Hi hat</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ins3" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                    </div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ch3" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                    </div>
                  </div>
                </div>
              </span>

              <span id="monoInst" class="d-none instMobile">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal marron-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/mono-w.svg" class="animal-icon">
                        Mono
                      </object>
                    </div>
                    <div class="title mt-1">Mon</div>
                    <div class="sub_title">Bass</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ins4" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                    </div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ch4" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                    </div>
                  </div>
                </div>
              </span>

              <span id="patoInst" class="d-none instMobile">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal mostaza-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/pato-w.svg" class="animal-icon">
                        Pato
                      </object>
                    </div>
                    <div class="title mt-1">Pat</div>
                    <div class="sub_title">Clave</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ins5" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                    </div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ch5" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                    </div>
                  </div>
                </div>
              </span>

              <span id="sapoInst" class="d-none instMobile">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/sapo-w.svg" class="animal-icon">
                        Sapo
                      </object>
                    </div>
                    <div class="title mt-1">Sap</div>
                    <div class="sub_title">Ride</div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ins6" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                    </div>
                  </div>
                  <div class="dial_container mb-1 ml-1">
                    <div id="mob-dial-ch6" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                    </div>
                  </div>
                </div>
              </span>

              <span id="loroInst" class="d-none instMobile">
                <div class="p-2 d-none d-flex flex-row align-items-end corners1 instrumento-animal verde-animal">
                  <div class="d-flex flex-column">
                    <div class="animal-icon">
                      <object type="image/svg+xml" data="GUI/svg/iconos/loro-w.svg" class="animal-icon">
                        Loro
                      </object>
                    </div>
                    <div class="title mt-1">Lor</div>
                    <div class="sub_title">Sampler</div>
                  </div>
                  <div class="d-flex flex-column">


                    <div id="loro-rec" class="mb-1 ml-1" data-toggle="tooltip" data-placement="top" title="Rec">
                      <a href="#" data-toggle="modal" data-target="#lororecModal" role="button"
                        class="d-flex m-auto p-1 rec-icon-s-b">&nbsp;</a>
                    </div>

                    <div class="dial_container mb-1 ml-1">
                      <div id="mob-dial-ins7" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                      </div>
                    </div>
                    <div class="dial_container mb-1 ml-1">
                      <div id="mob-dial-ch7" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                      </div>
                    </div>
                  </div>
              </span>
            </div>
            <span id="cerdoInst" class="d-block instMobile">
              <div class="p-2 d-flex flex-row align-items-end corners1 instrumento-animal rosa-animal">
                <div class="d-flex flex-column">
                  <div class="animal-icon">
                    <object type="image/svg+xml" data="GUI/svg/iconos/cerdo-w.svg" class="animal-icon">
                      Cerdo
                    </object>
                  </div>
                  <div class="title mt-1">Cerd</div>
                  <div class="sub_title">Scratch</div>
                </div>
                <div class="dial_container mb-1 ml-1">
                  <div id="mob-dial-ins8" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Pitch">
                  </div>
                </div>
                <div class="dial_container mb-1 ml-1">
                  <div id="mob-dial-ch8" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol.">
                  </div>
                </div>
              </div>
            </span>

          </div>

        </div>

        <!-- controles end -->

      </div>

    </div>
    <div id="der" class="col-12 col-lg-9 col-xl-10">

      <div class="row">

        <!-- CHANNEL CONTROL (#ch_control) -->

        <div id="ch_control" class="col-2 my-1 my-lg-0 p-4 corners-l fondo-1-animal">
          <div class="row ">

            <!-- ÍCONOS y DIALES -->

            <!-- ÍCONOS y DIALES -->
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup1">
              <div class="animal-icon">
                <img id="icono-ch8" src="GUI/img/cerdo.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch8" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup2">
              <div class="animal-icon">
                <img id="icono-ch7" src="GUI/img/loro.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch7" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup3">
              <div class="animal-icon">
                <img id="icono-ch6" src="GUI/img/sapo.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch6" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup4">
              <div class="animal-icon">
                <img id="icono-ch5" src="GUI/img/pato.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch5" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup5">
              <div class="animal-icon">
                <img id="icono-ch4" src="GUI/img/mono.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch4" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup6">
              <div class="animal-icon">
                <img id="icono-ch3" src="GUI/img/gato.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch3" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup7">
              <div class="animal-icon">
                <img id="icono-ch2" src="GUI/img/oso.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch2" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <div class="col-12 m-0 mb-1 p-0 d-flex flex-row justify-content-around channelGroup" id="channelGroup8">
              <div class="animal-icon" id="animalChannel1">
                <img id="icono-ch1" src="GUI/img/buho.png" class="soloButton img-fluid animal-pointer">
              </div>
              <div class="dial_container d-none d-lg-block">
                <div id="dial-ch1" class="mom_dial" data-toggle="tooltip" data-placement="top" title="Vol."></div>
              </div>
            </div>
            <!-- íconos y diales end -->


            <!-- íconos y diales end -->

          </div>
        </div>

        <!-- channel control end -->

        <!-- SECUENCIADOR (#secuenciador) -->


        <div id="secuenciador" class="col-10 col-xl-9 mx-0 my-1 my-lg-0 p-0 pr-lg-1">

          <div class="pl-0 py-4 pr-4 corners-r overflow-hidden fondo-1-animal">
            <div id="seq-animal" class="grid-size"></div>
          </div>
        </div>

        <!-- secuenciador end -->

        <!-- REGISTRO COMPARTIR (#jam-ajustes) -->


        <div id="jam-ajustes"
          class="col-xl-1 py-4 px-3 d-flex flex-xl-column justify-content-between fondo-1-animal corners1">
          <div id="jam-sesion" class="mx-auto d-flex my-auto flex-lg-column">
            <a href="#" id="boton" data-toggle="modal" data-target="#jamModal" role="button"
              class="animal-icon jam-btn text-center">
              Jam
            </a>
            <div class="m-auto text-center">
            </div>
          </div>
          <div id="combo-botones" class="mx-0 mx-xl-auto d-flex flex-row flex-xl-column">
            <div id="help" class="d-none mx-auto align-self-baseline">
              <a href="#" id="boton" data-toggle="modal" data-target="#helpModal" role="button">
                <img src="GUI/svg/botones/boton_ayuda.svg" class="animal-icon">
              </a>
            </div>
            <div id="settings" class="d-none mx-auto align-self-baseline">
              <a href="#" id="boton" data-toggle="modal" data-target="#settingsModal" role="button">
                <img src="GUI/svg/botones/boton_ajustes_w.svg" class="btn-icon">
              </a>
            </div>
          </div>
        </div>

        <!-- registro compartir end -->

      </div>
    </div>
  </div>

  <!-- main-down end -->


  </div>





  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
    integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
    crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>

  <script src='https://cdn.jsdelivr.net/npm/nexusui@2.0.13/dist/NexusUI.js'></script>

  <script src="GUI/scriptGUI.js"></script>
  <script src="GUI/svgDraw.js"></script>


  <script src="/socket.io/socket.io.js"></script>

  <script> //NET
    $(function () {



      var myChannel = [];//todos
      var socket = io(window.location.href);
      var newUrl;
      var roomID;
      var selectedChannels = [];
      var soloOn;
      var bpm = 90;
      var swing = 0;


      if (window.innerHeight > window.innerWidth) {
        $("#alerta").css("display", "block");
      } else {
        $("#alerta").css("display", "none");
      }

      //Query screen size to create grid  
      //smallest devices bootstrap default  GRILLA w:330 h:380
      // Small devices (landscape phones, 576px and up) @media (min-width: 576px) { ... } GRILLA w:430 h:380
      // Medium devices (tablets, 768px and up)  @media (min-width: 768px) { ... }  GRILLA w:580 h:380
      // Large devices (desktops, 992px and up) @media (min-width: 992px) { ... }  GRILLA w:580 h:380 
      // Extra large devices (large desktops, 1200px and up)  @media (min-width: 1200px) { ... } GRILLA w:690 h:380
      var sequencer;

      if ($(window).width() > 1200) {
        //console.log('creo seq Extra large devices (large desktops, 1200px and up)  @media (min-width: 1200px) { ... } GRILLA w:690 h:380 ');
        sequencer = new Nexus.Sequencer('#seq-animal', {
          'size': [690, 380],
          'mode': 'toggle',
          'rows': 8,
          'columns': 16
        });
      } else if (($(window).width() > 768)) {
        //console.log('creo seq Large devices (desktops, 768 y992px and up) @media (min-width: 992px y 768) { ... }  GRILLA w:580 h:380 ');
        sequencer = new Nexus.Sequencer('#seq-animal', {
          'size': [580, 380],
          'mode': 'toggle',
          'rows': 8,
          'columns': 16
        });

      } else if (($(window).width() > 576)) {
        //console.log('creo seq Small devices (landscape phones, 576px and up) @media (min-width: 576px) { ... } GRILLA w:430 h:380');
        sequencer = new Nexus.Sequencer('#seq-animal', {
          'size': [430, 380],
          'mode': 'toggle',
          'rows': 8,
          'columns': 16
        });

      } else {
        //console.log('creo seq S//smallest devices bootstrap default  GRILLA w:330 h:380');
        sequencer = new Nexus.Sequencer('#seq-animal', {
          'size': [330, 380],
          'mode': 'toggle',
          'rows': 8,
          'columns': 16
        });
      }

      sequencer.colorize("accent", "#5EC20A");
      //NEXUs
      /*  var sequencer = new Nexus.Sequencer('#seq-animal', {
          'size': [580, 380],
          'mode': 'toggle',
          'rows': 8,
          'columns': 16
        });*/

      ///

      // TONEJS
      var myShifter1, myShifter2, myShifter3, myShifter4, myShifter5, myShifter6, myShifter7, myShifter8;
      var sonidos = new Tone.Players({
        "Cerdo": "/audios/kit-amazonia/8-cerdo-animalia.wav",//"/audios/kit-002/inicial_008_open hihat_cerdo.wav",//"/audios/kit-001/hd_008_cerdo.wav",
        "Loro": "/audios/kit-amazonia/7-loro-animalia.wav",//"/audios/kit-002/inicial_007_loro_triangulo.wav",//"/audios/kit-001/hd_007_loro.wav",
        "Sapo": "/audios/kit-amazonia/6-sapo-animalia.wav",//"/audios/kit-002/inicial_005_clave_sapo.wav",
        "Pato": "/audios/kit-amazonia/5-pato-animalia.wav",//"/audios/kit-002/inicial_006_ride_pato.wav",//"/audios/kit-001/hd_006_pato.wav",
        "Mono": "/audios/kit-amazonia/4-mono-animalia.wav",//"/audios/kit-002/inicial_003_bass_mono.wav",//"/audios/kit-001/hd_005_sapo.wav",        
        "Gato": "/audios/kit-amazonia/3-gato-animalia.wav",//"/audios/kit-002/inicial_004_hihat_gato.wav",// "/audios/kit-001/hd_004_gato.wav",             
        /*"/audios/kit-001/hd_003_mono.wav", */
        "Oso": "/audios/kit-amazonia/2-oso-animalia.wav",//"/audios/kit-002/inicial_002_sd_oso.wav", /* "/audios/kit-001/hd_002_oso.wav",*/
        "Buho": "/audios/kit-amazonia/1-buho-animalia.wav"//"/audios/kit-002/inicial_001_bd_buho.wav" /* "/audios/kit-001/hd_001_buho.wav" */


      }, {
        "volume": -1,
        "fadeOut": "16n",
      });

      var myShifter = [myShifter1, myShifter2, myShifter3, myShifter4, myShifter5, myShifter6, myShifter7, myShifter8];
      //the notes
      var scaleNotes = ["Cerdo", "Loro", "Pato", "Sapo", "Gato", "Mono", "Oso", "Buho"];

      for (i = 0; i < 8; i++) {
        //(sonidos.get(scaleNotes[(7 - myAnimalNumber)]).
        myShifter[i] = new Tone.PitchShift(2); //.toMaster();
        sonidos.get(scaleNotes[i]).chain(myShifter[i], Tone.Master);
      }
      var stepNumber = 0;
      var loop = 0;


      Tone.Transport.bpm.value = bpm;
      //Tone.Transport.swing = swing;



      var matrix = sequencer.matrix.pattern;
      //  io.connect);
      //esconde enlace
      $("#enlace").addClass("opacity-3");
      $("#enlace").css("pointer-events", "none");
      $("#okCanales").attr("disabled", true);

      socket.on('host', function (newroomID) {

        var currentUrl = window.location.href;
        var url = new URL(currentUrl);
        roomID = newroomID;
        url.searchParams.set("roomID", newroomID); // setting your param
        newUrl = url.href;
        let stateObj = { id: "100" };
        window.history.replaceState(stateObj, "roomID", newUrl);
        var seqInicial = [[true, false, false, false, false, false, false, false, true, false, false, false, false, false, false, true],
        [false, false, true, false, false, true, false, false, false, false, true, false, false, false, true, false],
        [true, false, false, false, false, false, false, false, true, false, false, false, false, true, false, false],
        [false, false, true, false, false, true, false, false, false, false, true, false, false, false, false, false],
        [false, false, true, false, false, false, false, false, false, false, false, false, false, false, false, false],
        [true, false, false, false, true, false, false, false, true, false, true, false, false, true, false, true],
        [false, false, false, false, true, false, true, false, false, false, false, false, false, false, false, false],
        [true, false, true, false, false, true, false, false, true, false, false, false, false, true, false, true]];
        socket.emit('sequencer', sequencer.matrix.pattern);

        $(".disabled-overlay").addClass("d-none");
        myChannel = [1, 2, 3, 4, 5, 6, 7, 8];
        sequencer.matrix.set.all(seqInicial);

      });


      socket.on('guest', function (pattern, michannel, unbpm) {
        $("#jam-sesion").addClass("opacity-3");
        $("#jam-sesion").addClass("ajeno");
        sequencer.matrix.set.all(pattern);
        myChannel = michannel;
        setMyChannel();
        bpm = unbpm;
        Tone.Transport.bpm.value = bpm;
        //console.log("me llegó bpm de " + unbpm);
        //sacarbpm 
        $("#decrement-bpm-btn").addClass("opacity-3");
        $("#decrement-bpm-btn").addClass("ajeno");
        $("#increment-bpm-btn").addClass("opacity-3");
        $("#increment-bpm-btn").addClass("ajeno");
      });

      socket.on('chat message', function (msg) {

        $('#messages').preppend('<li> ' + msg + ' </li>');
      });


      $('form').submit(function (e) {
        e.preventDefault(); // prevents page reloading
        var myAnimalsLetter = ["C", "L", "S", "P", "M", "G", "O", "B"];
        var myLetters = "";
        myChannel.forEach(function (channel) {
          if (channel != "") {
            myLetters = myLetters + '<span class="interloc-' + myAnimalsLetter[channel - 1] + '">' + myAnimalsLetter[channel - 1] + '</span>';
          }
        });
        var emitMe = myLetters + "<p class='mt-1 mb-0 pb-2'>" + $('#m').val() + "</p>"
        socket.emit('chat message', emitMe);
        $('#messages').prepend('<li> ' + emitMe + ' </li>');
        $('#m').val('');
        return false;
      });

      $(".channelsInvite").click(function () {
        var selectedCH = $(this)[0];
        if ($(selectedCH).attr("sel") == "false") {
          $(selectedCH).css("border-style", "solid");
          selectedChannels.push($(selectedCH).attr("channelNumber"));
          $(selectedCH).attr("sel", "true");
        } else {
          $(selectedCH).attr("sel", "false");
          var index = selectedChannels.indexOf($(selectedCH).attr("channelNumber"));
          if (index > -1) {
            selectedChannels.splice(index, 1);
          }

          $(selectedCH).css("border-style", "none");
        }
        if (selectedChannels.length > 0) {
          $("#okCanales").attr("disabled", false);
        } else {
          $("#okCanales").attr("disabled", true);
        }
      });

      $("#okCanales").click(function () {
        if (selectedChannels.length > 0) {
          myChannel = selectedChannels;
          setMyChannel();
          $("#sel-inst").addClass("opacity-3");
          $("#sel-inst").css("pointer-events", "none");
          $("#enlace").removeClass("opacity-3");
          $("#enlace").css("pointer-events", "");
          $("#linkText").val(window.location.origin + "?roomID=" + roomID);


          socket.emit('roomOpened', myChannel);
        }
      });

      function setMyChannel() {
        $(".channelGroup").addClass("opacity-2");
        $(".channelGroup").addClass("ajeno");
        $(".disabled-overlay").addClass("d-block");

        if (myChannel.length > 0) {
          myChannel.forEach(channel => {
            $("#channelGroup" + channel).removeClass("opacity-2");
            $("#channelGroup" + channel).removeClass("ajeno");
            var myInst = $(".instrumento" + channel)[0];

            $(myInst).find(".disabled-overlay").removeClass("d-block");
            $(myInst).find(".disabled-overlay").addClass("d-none");
          });

          var cuadrados = $("rect");     //((v.row * 16)) + (v.column)];

          for (i = 0; i < cuadrados.length; i++) {
            var mio = false;
            myChannel.forEach(function (channel) {
              if (Math.floor(i / 16) == channel - 1) {
                mio = true;
              }
            });
            if (!mio) {
              var miRect = $("rect")[i];
              $(miRect).css("pointer-events", "none");
            }
          }
          /*
          sequencer.matrix.ui.cells.forEach(function (cell) {
            $(cell).css("pointer-events", "none");
          });*/

        }


        $(".ajeno").click(function (e) {
          e.preventDefault();
          //console.log("entró a prevent");
        });


      }

      sequencer.on('change', function (v) {
        myChannel.forEach(function (micha) {
          if (v.row == micha - 1) {
            socket.emit('toggleStep', v);
            //console.log("emito change");
          }
        });
        //   if (v.row


        /* var itsMyChannel = false;
         myChannel.forEach(channel => {
           if (v.row == channel) {
             itsMyChannel = true;
             ///TENGO QUE PONERLRE     pointer-events: none; a todas las otras rows           
           }
         });*/
        /* //console.log("es un cambio");
         //console.log(v);
         */
        //  var myCell = sequencer.cells[v.row * v.column];
        //var miRect = $("rect")[((v.row * 16)) + (v.column)];

        //if (v.state == true) {

        //if (v.row == 0) {
        //     $(miRect).css("fill", "red");
        //}

        //}
      });

      socket.on('toggleStep', function (miStep) {
        //console.log("llego " + miStep);
        sequencer.matrix.set.cell(miStep.column, miStep.row, miStep.state);
        // sequencer.colorize("accent","#ff0000");

      });

      socket.on("bpm", function (unbpm) {
        bpm = unbpm;
        Tone.Transport.bpm.value = bpm;
        $("#bpmNumber").html(bpm);
      });

      function emitBpm(bpm) {
        Tone.Transport.bpm.value = bpm;
        socket.emit('bpm', bpm);
      }

      $("#decrement-bpm-btn").click(function () {
        bpm--;
        $("#bpmNumber").html(bpm);
        emitBpm(bpm);
      });

      $("#increment-bpm-btn").click(function () {
        bpm++;
        $("#bpmNumber").html(bpm);
        emitBpm(bpm);
      });




      socket.on("swing", function (unswing) {
        swing = unswing;

        //  Tone.Transport.swing = swing / 100;
        $("#swingNumber").html(swing);
      });

      function emitSwing(swing) {
        //Tone.Transport.swing = swing / 100;
        socket.emit('swing', swing);
      }

      $("#decrement-swing-btn").click(function () {
        if (swing > 0) {
          swing--;
          $("#swingNumber").html(swing);
          emitSwing(swing);
        }
      });

      $("#increment-swing-btn").click(function () {
        if (swing < 31) {
          swing++;
          $("#swingNumber").html(swing);
          emitSwing(swing);
        }
      });

      //chicons

      var myChannelAnimalIcon = $("#animalChannel1")[0];
      //    var muteado = false;
      var miSolo = -1;

      $(".soloButton").click(function () {
        $(".instMobile").addClass("d-none");
        $(".instMobile").removeClass("d-block");

        var myId = this.id;
        var myAnimalNumber = myId.split("icono-ch")[1];
        myAnimalNumber--;
        $($(".instMobile")[myAnimalNumber]).addClass("d-block");
        $(".soloButton").removeClass("activado");
        if (miSolo == (7 - myAnimalNumber)) {
          $(this).removeClass("activado");
          miSolo = -1;
        } else {
          $(this).addClass("activado");
          miSolo = (7 - myAnimalNumber);
        }
      });
      /*
      myAnimalNumber--;
      if (!(sonidos.get(scaleNotes[(7 - myAnimalNumber)]).mute)) {
         $(this).addClass("activado");
        for (i = 0; i < 8; i++) {
          sonidos.get(scaleNotes[i]).mute = true;
          //console.log("es el animal numero"+ i)
          //console.log(scaleNotes[i]);
          //console.log("quedó muteado " +sonidos.get(scaleNotes[i]).mute);
        }
        sonidos.get(scaleNotes[(7 - myAnimalNumber)]).mute = false;
        //console.log(scaleNotes[(7 - myAnimalNumber)]);
  
      } else {
        $(this).removeClass("activado");
        for (i = 0; i < 8; i++) {
          //console.log(scaleNotes[i]);
          sonidos.get(scaleNotes[i]).mute = false;
          //console.log("es el animal numero"+ i)
          //console.log(scaleNotes[i]);
          //console.log("quedó muteado " +sonidos.get(scaleNotes[i]).mute);
        }
        
    }
  
  
    });*/

      //copy link
      $(".input-group-append").click(function () {
        /* Get the text field */
        var copyText = document.getElementById("linkText");

        /* Select the text field */
        copyText.select();
        copyText.setSelectionRange(0, 99999); /*For mobile devices*/

        /* Copy the text inside the text field */
        document.execCommand("copy");

      });


      sequencer.on('change', function (v) {
        // //console.log(v);
      });

      sequencer.on('step', function (v) {
        ////console.log(v);
      });


      ////GRABAR
      var isRecording;
      const actx = Tone.context;
      const dest = actx.createMediaStreamDestination();
      let recorder = null;
      var chunks = [];





      $("#rec-btn").click(function () {

        if (isRecording) {
          recorder.stop();
          return;
        }
        else {
          try {
            recorder = new MediaRecorder(dest.stream);
          } catch (err) {
            return err.name;     /* return the error name */
          }
          sonidos.connect(dest);
          isRecording = true;
          chunks = [];
          $(this).toggleClass('rec-btn-activo');
          recorder.start();

          // dest = actx.createMediaStreamDestination();


          recorder.ondataavailable = evt => chunks.push(evt.data);

          recorder.onstop = evt => {
            let blob = new Blob(chunks, { type: 'audio/ogg; codecs=opus' });
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = 'ANIMAL Recording.ogg';
            a.target = "_blank"
            a.click();
            $(this).toggleClass('rec-btn-activo');
          };
        }

      });
      ///GUARDA GRABACION

      $("#Animal_logo").click(function () { //inicia el sequencer
        playSequencer();
      });

      function playSequencer() {
        // Tone.Transport.bpm.value = 90; //SACAR DE ACA
        if (loop === 0) {
          var matrix = sequencer.matrix.pattern;
          loop = new Tone.Sequence(function (time) {

            for (var i = 7; i >= 0; i--) {

              if (matrix[i][stepNumber] && (miSolo == -1 || miSolo == i)) {
                sonidos.get(scaleNotes[i]).start(time, 0, "16n", 0, 1);

              }

            }
            sequencer.next();
            stepNumber++;
            stepNumber = stepNumber % 16;


          }, scaleNotes, "16n");
          loop.start();

          loop.loop = true;
        }
        if (Tone.Transport.state == "started") {
          Tone.Transport.stop();
          // sequencer.stop();
        } else {
          //   sequencer.start()
          //  sequencer.interval.ms(166);
          Tone.Transport.start();
        }
      };

      $("#mute-btn").click(function () {
        playSequencer();
        $(this).toggleClass("mute-btn");
        $(this).toggleClass("mute-btn-activo");
      });

      function changePitch(myAnimal, value) {
        //console.log("entro a change pitch");
        //console.log(myAnimal);
        var myAnimalNumber = myAnimal.split("dial-ins")[1];
        myShifter[8 - myAnimalNumber].pitch = value;
        //sonidos.get(scaleNotes[8 - myAnimalNumber]).volume.value = value;
      }

      function changeVolume(myAnimal, value) {
        //console.log("entro a change volume");
        //console.log(myAnimal);
        var myAnimalNumber = myAnimal.split("dial-ch")[1];
        sonidos.get(scaleNotes[8 - myAnimalNumber]).volume.value = value;
      }


      socket.on('pitchChange', function (myAnimal, value) {
        changePitch(myAnimal, value)
      });


      socket.on('volumeChanged', function (myAnimal, value) {
        changeVolume(myAnimal, value);
      });

      dialins.forEach((dialin) => {
        dialin.on('change', function (v) {
          //console.log("encontró el dial");
          //console.log(this);
          //console.log(v);
          var id = this.parent.id
          socket.emit('pitchChange', id, v);
          changePitch(id, v);
        })
      })

      dialchs.forEach((dialch) => {
        dialch.on('change', function (v) {
          //console.log("encontró el dial");
          //console.log(this);
          //console.log(v);
          var id = this.parent.id
          socket.emit('volumeChanged', id, v);
          changeVolume(id, v);
        })
      })



      //VISIBILITY PAUSE
      // Set the name of the hidden property and the change event for visibility
      var hidden, visibilityChange;
      if (typeof document.hidden !== "undefined") { // Opera 12.10 and Firefox 18 and later support 
        hidden = "hidden";
        visibilityChange = "visibilitychange";
      } else if (typeof document.msHidden !== "undefined") {
        hidden = "msHidden";
        visibilityChange = "msvisibilitychange";
      } else if (typeof document.webkitHidden !== "undefined") {
        hidden = "webkitHidden";
        visibilityChange = "webkitvisibilitychange";
      }

      function handleVisibilityChange() {
        if (document[hidden]) {
          Tone.Transport.stop();
        }
      }


      // Warn if the browser doesn't support addEventListener or the Page Visibility API
      if (typeof document.addEventListener === "undefined" || hidden === undefined) {
        //console.log("This demo requires a browser, such as Google Chrome or Firefox, that supports the Page Visibility API.");
      } else {
        // Handle page visibility change   
        document.addEventListener(visibilityChange, handleVisibilityChange, false);
      }
      // END  VISIBILITY PAUSE

      window.addEventListener("orientationchange", function () {
        //console.log("the orientation of the device is now " + screen.orientation.angle);
        if (window.innerHeight > window.innerWidth) {
          $("#alerta").css("display", "block");
        } else {
          $("#alerta").css("display", "none");
        }
      });


    });

  </script>

  <script>
    $(document).ready(function () {
      // reset svg each time
      $("#svg1").attr("height", "0");
      $("#svg1").attr("width", "0");
      connectAll();
    });

    $(window).resize(function () {
      // reset svg each time
      $("#svg1").attr("height", "0");
      $("#svg1").attr("width", "0");
      connectAll();
    });




  </script>

  <script type="text/javascript">
    $(document).ready(function () {
      $('#playModal').modal('show');
      $('[data-toggle="tooltip"]').tooltip()
    });
  </script>


</body>

</html>